{
  "code": "import { EventManager } from \"../Manager/EventManager\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nimport { ViewManager } from \"../Manager/ViewManager\";\r\nimport { GoodsType } from \"../Data/GameData\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { ui } from \"../ui/layaMaxUI\";\r\nimport GoodsBody from \"./Body/GoodsBody\";\r\nexport default class GoodsView {\r\n    constructor() {\r\n        this.type = 1;\r\n    }\r\n    createView(type, s) {\r\n        this.type = type;\r\n        this.pos = s;\r\n        this.scene = new ui.GoodsBodyUI();\r\n        this.loadComplete();\r\n    }\r\n    loadComplete() {\r\n        this.body = this.scene.getComponent(Laya.RigidBody);\r\n        this.box = this.scene.getComponent(Laya.BoxCollider);\r\n        this.scene.addComponent(GoodsBody);\r\n        this.script = this.scene.getComponent(GoodsBody);\r\n        this.view = fairygui.UIPackage.createObject(\"Game\", \"goodsView\");\r\n        this.mc = fairygui.UIPackage.createObject(\"Game\", \"createGoodsAni\").asMovieClip;\r\n        this.mc.x = -this.mc.width / 2 + 20;\r\n        this.mc.y = -this.mc.height / 2;\r\n        this.mc.setPlaySettings(0, -1, 1, 0, Laya.Handler.create(this, this.createAniComplete));\r\n        this.view.addChild(this.mc);\r\n        this.scene.addChild(this.view.displayObject);\r\n        ViewManager.instance.warView.scene.addChild(this.scene);\r\n        this.setBombPos();\r\n        EventManager.instance.addNotice(GameEvent.CLEAR_WAR_VIEW, this, this.clearView);\r\n        EventManager.instance.addNotice(GameEvent.PLAYER_GET_GOODS, this, this.dispose);\r\n    }\r\n    createAniComplete() {\r\n        this.view.removeChild(this.mc);\r\n        this.view.m_load.url = \"ui://Game/goods_\" + this.type;\r\n        if (this.type != GoodsType.GoodsType_COIN && this.type != GoodsType.GoodsType_GRE) {\r\n            this.view.m_load.content.setPlaySettings(0, -1, 0, 0);\r\n        }\r\n    }\r\n    dispose(s) {\r\n        if (s == this.box.owner) {\r\n            SoundManager.instance.playSound(\"get_goods\");\r\n            this.clearView();\r\n            this.dispatcherEvt();\r\n        }\r\n    }\r\n    clearView() {\r\n        EventManager.instance.offNotice(GameEvent.CLEAR_WAR_VIEW, this, this.clearView);\r\n        EventManager.instance.offNotice(GameEvent.PLAYER_GET_GOODS, this, this.dispose);\r\n        this.view.removeChildren();\r\n        if (this.view)\r\n            this.view.dispose();\r\n        if (this.scene) {\r\n            this.script.isRemove = true;\r\n            this.scene.removeSelf();\r\n        }\r\n        Laya.Pool.recover(\"goods\", this);\r\n    }\r\n    dispatcherEvt() {\r\n        EventManager.instance.dispatcherEvt(GameEvent.CHANGE_PLAYER_GOODS, this.type);\r\n    }\r\n    setBombPos() {\r\n        this.scene.x = this.pos.x + 20;\r\n        this.scene.y = this.pos.y;\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_goodsView.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts",
    "D:/littleGame/gunfire/src/Manager/SoundManager.ts",
    "D:/littleGame/gunfire/src/ui/layaMaxUI.ts",
    "D:/littleGame/gunfire/src/View/Body/GoodsBody.ts"
  ]
}
