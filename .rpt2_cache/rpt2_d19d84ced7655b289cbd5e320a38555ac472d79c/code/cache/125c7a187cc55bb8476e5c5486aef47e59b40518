{
  "code": "import { GameManager } from \"./GameManager\";\r\nimport { ViewManager } from \"./ViewManager\";\r\nimport { SoundManager } from \"./SoundManager\";\r\nimport { EventManager } from \"./EventManager\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nimport { VideoType, VideoInfo } from \"../Data/VideoData\";\r\nexport class MooSnowSDK {\r\n    static login() {\r\n        moosnow.platform.login(() => {\r\n            console.log('登录成功 ');\r\n        });\r\n        if (MooSnowSDK.getPlatform() == moosnow.APP_PLATFORM.WX)\r\n            MooSnowSDK.showAutoBanner();\r\n    }\r\n    static finishLoading() {\r\n        moosnow.http.finishLoading();\r\n    }\r\n    static startGame(lv) {\r\n        moosnow.http.startGame(lv + \"\");\r\n    }\r\n    static endGame(lv, isWin) {\r\n        moosnow.http.endGame(lv + \"\", isWin);\r\n    }\r\n    static videoPoint(type, lv, str) {\r\n        moosnow.http.videoPoint(type + \"\", str, lv + \"\");\r\n    }\r\n    static getAD() {\r\n        moosnow.ad.getAd((r) => {\r\n            console.log('广告数据 ', r);\r\n            GameManager.instance.adList = r.indexLeft.concat();\r\n            GameManager.instance.setADlist();\r\n        });\r\n    }\r\n    static showBanner(isWuChu = false) {\r\n        moosnow.platform.showBanner(isWuChu, (isOpend) => {\r\n            console.log('用户是否点击了banner ', isOpend);\r\n            if (isOpend) {\r\n                if (isWuChu) {\r\n                    MooSnowSDK.hideBanner();\r\n                    if (GameManager.instance.platform == moosnow.APP_PLATFORM.WX)\r\n                        ViewManager.instance.clickChestView.clickSuccess();\r\n                    if (GameManager.instance.platform == moosnow.APP_PLATFORM.QQ) {\r\n                        ViewManager.instance.clickAdView.showReward();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    static hideBanner() {\r\n        moosnow.platform.hideBanner();\r\n    }\r\n    static showAutoBanner() {\r\n        moosnow.platform.showAutoBanner();\r\n    }\r\n    static showVideo(data, videoData, successFun, errorFun, noFinishFun, closeFun) {\r\n        if (GameManager.instance.platform == moosnow.APP_PLATFORM.VIVO) {\r\n            if (!MooSnowSDK.showVIVOTimer) {\r\n                ViewManager.instance.showTipsView(\"视频还未准备好，请稍后再试\");\r\n                return;\r\n            }\r\n        }\r\n        if (SoundManager.instance.isOpenSound) {\r\n            Laya.SoundManager.soundMuted = true;\r\n            Laya.SoundManager.musicMuted = true;\r\n        }\r\n        if (videoData.type == VideoType.VIDEOTYPE_ITEM) {\r\n            MooSnowSDK.videoPoint(0, GameManager.instance.choiseLevel, VideoInfo.VIDEOINFO_ITEM);\r\n        }\r\n        else if (videoData.type == VideoType.VIDEOTYPE_LIFE) {\r\n            MooSnowSDK.videoPoint(0, GameManager.instance.choiseLevel, VideoInfo.VIDEOINFO_LIFE);\r\n        }\r\n        else if (videoData.type == VideoType.VIDEOTYPE_DOUBLE_COIN) {\r\n            MooSnowSDK.videoPoint(0, GameManager.instance.choiseLevel, VideoInfo.VIDEOINFO_DOUBLE_COIN);\r\n        }\r\n        else if (videoData.type == VideoType.VIDEOTYPE_BOX) {\r\n            MooSnowSDK.videoPoint(0, GameManager.instance.choiseLevel, VideoInfo.VIDEOINFO_BOX);\r\n        }\r\n        moosnow.platform.showVideo(res => {\r\n            switch (res) {\r\n                case moosnow.VIDEO_STATUS.NOTEND:\r\n                    console.log('视频未观看完成 ');\r\n                    if (noFinishFun) {\r\n                        noFinishFun();\r\n                    }\r\n                    if (GameManager.instance.platform == moosnow.APP_PLATFORM.BYTEDANCE) {\r\n                        ViewManager.instance.showNoVideoView(videoData, data, successFun, closeFun);\r\n                    }\r\n                    else\r\n                        ViewManager.instance.showTipsView(\"未看完视频无法获得奖励哦\");\r\n                    break;\r\n                case moosnow.VIDEO_STATUS.ERR:\r\n                    console.log('获取视频错误 ');\r\n                    if (errorFun) {\r\n                        errorFun();\r\n                    }\r\n                    ViewManager.instance.showTipsView(\"视频获取失败，请稍后再试\");\r\n                    break;\r\n                case moosnow.VIDEO_STATUS.END:\r\n                    console.log('观看视频结束 ');\r\n                    if (GameManager.instance.platform == moosnow.APP_PLATFORM.BYTEDANCE)\r\n                        ViewManager.instance.hidePopUpView(null, true);\r\n                    GameManager.instance.showVideoResp(data, videoData, successFun);\r\n                    MooSnowSDK.videoPoint(1, GameManager.instance.choiseLevel, videoData.info);\r\n                    break;\r\n            }\r\n            if (SoundManager.instance.isOpenSound) {\r\n                Laya.SoundManager.soundMuted = false;\r\n                Laya.SoundManager.musicMuted = false;\r\n                SoundManager.instance.playBGM(SoundManager.instance.bgmName);\r\n            }\r\n            if (GameManager.instance.platform == moosnow.APP_PLATFORM.VIVO) {\r\n                Laya.timer.clear(this, this.showVIVOVideo);\r\n                this.showVIVOTimer = false;\r\n                Laya.timer.once(10000, this, this.showVIVOVideo);\r\n            }\r\n        });\r\n    }\r\n    static showVIVOVideo() {\r\n        this.showVIVOTimer = true;\r\n    }\r\n    static getMistouchPosNum() {\r\n        var misTouchPosNum = 0;\r\n        moosnow.http.getMistouchPosNum((res) => {\r\n            MooSnowSDK.mistouchPos = misTouchPosNum = res;\r\n            console.log(\"误点位移次数间隔\", res);\r\n        });\r\n    }\r\n    static getMisTouchNum() {\r\n        var misTouchNum = 0;\r\n        moosnow.http.getMisTouchNum((res) => {\r\n            MooSnowSDK.misTouchNum = misTouchNum = res;\r\n            console.log(\"误点次数间隔\", res);\r\n        });\r\n    }\r\n    static setPoint(str) {\r\n        moosnow.http.point(str);\r\n    }\r\n    static getAllConfig() {\r\n        var data;\r\n        moosnow.http.getAllConfig(res => {\r\n            data = res;\r\n            console.log(\"游戏的所有配置数据\", res);\r\n        });\r\n        return data;\r\n    }\r\n    static getPlatform() {\r\n        let curPlatform = moosnow.getAppPlatform();\r\n        return curPlatform;\r\n    }\r\n    static showQQADBox(isWuChu = false, closeShowBannerr = false) {\r\n        moosnow.platform.showAppBox((res) => {\r\n            if (res <= 0) {\r\n                moosnow.platform.hideAppBox();\r\n                EventManager.instance.dispatcherEvt(GameEvent.CLOSE_APP_AD_BOX);\r\n            }\r\n            if (isWuChu && res == 0) {\r\n                ViewManager.instance.hidePopUpView(ViewManager.instance.clickAdView);\r\n                MooSnowSDK.hideQQADBox();\r\n            }\r\n        }, false);\r\n    }\r\n    static hideQQADBox() {\r\n        moosnow.platform.hideAppBox(() => {\r\n            ViewManager.instance.showResultView();\r\n        });\r\n    }\r\n    static startRecord() {\r\n        if (GameManager.instance.platform != moosnow.APP_PLATFORM.BYTEDANCE)\r\n            return;\r\n        moosnow.platform.startRecord(300, (e) => {\r\n            console.log('是否是抖音', e);\r\n        });\r\n    }\r\n    static clipRecord(call) {\r\n        if (GameManager.instance.platform != moosnow.APP_PLATFORM.BYTEDANCE)\r\n            return;\r\n        console.log('视频精彩剪切');\r\n        moosnow.platform.clipRecord([15, 2], (res) => {\r\n            console.log('剪切视频完成');\r\n            MooSnowSDK.stopRecord();\r\n        });\r\n    }\r\n    static stopRecord() {\r\n        if (GameManager.instance.platform != moosnow.APP_PLATFORM.BYTEDANCE)\r\n            return;\r\n        moosnow.platform.stopRecord((res) => {\r\n            if (res.videoPath) {\r\n                let videoPath = res.videoPath;\r\n                console.log('录制的视频路径', videoPath);\r\n            }\r\n        });\r\n    }\r\n    static shareRecord() {\r\n        if (GameManager.instance.platform != moosnow.APP_PLATFORM.BYTEDANCE)\r\n            return;\r\n        moosnow.platform.share({\r\n            channel: moosnow.SHARE_CHANNEL.VIDEO\r\n        }, (res) => {\r\n            console.log('分享结束', res);\r\n        }, (res) => {\r\n            console.log('录屏时间太短', res);\r\n        });\r\n        ViewManager.instance.hidePopUpView(ViewManager.instance.recordView, false);\r\n        ViewManager.instance.showResultView();\r\n    }\r\n    static installShortcut() {\r\n        moosnow.platform.hasShortcutInstalled(function (has) {\r\n            if (!has)\r\n                moosnow.platform.installShortcut(null);\r\n        });\r\n    }\r\n    static clickNative(callback) {\r\n        moosnow.platform.clickNative(callback);\r\n    }\r\n}\r\nMooSnowSDK.misTouchNum = 0;\r\nMooSnowSDK.mistouchPos = 0;\r\nMooSnowSDK.showVIVOTimer = true;\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Manager/SoundManager.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Data/VideoData.ts"
  ]
}
