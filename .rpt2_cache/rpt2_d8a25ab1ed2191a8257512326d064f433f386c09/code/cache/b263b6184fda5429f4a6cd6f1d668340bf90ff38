{
  "code": "import { ViewManager } from \"../Manager/ViewManager\";\r\nimport { PlayerData } from \"../Data/PlayerData\";\r\nimport EnemyBody from \"./EnemyBody\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nimport { EventManager } from \"../Manager/EventManager\";\r\nexport default class Enemy {\r\n    constructor() {\r\n        this.enemyType = 1;\r\n        this.direction = 0;\r\n        this.sRun = false;\r\n        this.keyRight = false;\r\n        this.keyLeft = false;\r\n        this.keyJump = false;\r\n        this.speed = 10;\r\n        this.jumpHigh = 200;\r\n        this.hp = 100;\r\n    }\r\n    initView() {\r\n        Laya.Scene.load(\"PlayerBody.scene\", Laya.Handler.create(this, this.loadComplete));\r\n    }\r\n    ;\r\n    loadComplete(s) {\r\n        this.scene = s;\r\n        this.view = fairygui.UIPackage.createObject(\"Game\", \"enemy\");\r\n        this.view.setPivot(0.5, 0.5);\r\n        this.enemyCtl = this.view.getController(\"ctl\");\r\n        this.enemy = this.view.getChildAt(0);\r\n        this.enemy.url = \"ui://Game/enemy\" + this.enemyType;\r\n        this.scene.addComponent(EnemyBody);\r\n        this.scene.addChild(this.enemy.displayObject);\r\n        this.scene.x = 1900;\r\n        this.scene.y = 400;\r\n        ViewManager.instance.warView.scene.addChild(this.scene);\r\n        EventManager.instance.addNotice(GameEvent.BULLET_HIT_ENEMY, this, this.beHit);\r\n        Laya.timer.once(3000, this, this.setFire);\r\n    }\r\n    ;\r\n    beHit() {\r\n        this.hp -= 30;\r\n        Laya.timer.clear(this, this.setColor);\r\n        this.bodyLoader.color = \"#ff0000\";\r\n        if (this.hp <= 0) {\r\n            this.setDeath();\r\n        }\r\n        else {\r\n            Laya.timer.once(200, this, this.setColor);\r\n        }\r\n    }\r\n    setColor() {\r\n        this.bodyLoader.color = \"#ffffff\";\r\n    }\r\n    setLeft() {\r\n        if (this.direction == -1)\r\n            return;\r\n        this.direction = -1;\r\n        this.view.skewY = 0;\r\n    }\r\n    setRight() {\r\n        if (this.direction == 1)\r\n            return;\r\n        this.direction = 1;\r\n        this.view.skewY = 180;\r\n    }\r\n    setIdle() {\r\n        if (this.enemyType == 1 || this.enemyType == 2) {\r\n            this.bodyLoader.url = \"ui://Game/enemyIdle_1\";\r\n        }\r\n        else if (this.enemyType == 3) {\r\n            this.bodyLoader.url = \"ui://Game/enemyIdle_2\";\r\n        }\r\n        else {\r\n            this.bodyLoader.url = \"ui://Game/enemyIdle_1\";\r\n        }\r\n    }\r\n    setRun() {\r\n        if (this.sRun)\r\n            return;\r\n        this.bodyLoader.url = \"ui://Game/enemy_run_\" + this.enemyType;\r\n    }\r\n    stillRun() {\r\n        if (this.direction == 1) {\r\n            this.scene.x += this.speed;\r\n            if (this.scene.x >= Laya.Browser.clientWidth / 2) {\r\n                this.scene.x = Laya.Browser.clientWidth / 2;\r\n            }\r\n        }\r\n        else {\r\n            this.scene.x -= this.speed;\r\n            if (this.scene.x < 1)\r\n                this.scene.x = 1;\r\n        }\r\n    }\r\n    setFire() {\r\n        Laya.timer.once(3000, this, this.setFire);\r\n        this.bodyLoader.content.rewind();\r\n        if (this.enemyType == 1 || this.enemyType == 2) {\r\n            if (this.getRandomFire() == 1) {\r\n                this.bodyLoader.url = \"ui://Game/enemy_fire_1\";\r\n                ViewManager.instance.createEnemyBullet(PlayerData.ENEMY_PIS, this.direction, this);\r\n            }\r\n            else {\r\n                this.bodyLoader.url = \"ui://Game/enemy_fire_2\";\r\n            }\r\n        }\r\n        else if (this.enemyType == 3) {\r\n            this.bodyLoader.url = \"ui://Game/enemy_fire_3\";\r\n        }\r\n        this.bodyLoader.content.setPlaySettings(1, -1, 1, 1, Laya.Handler.create(this, this.shotComplete));\r\n    }\r\n    shotComplete() {\r\n        this.bodyLoader.content.rewind();\r\n        this.setIdle();\r\n    }\r\n    setBoom() {\r\n    }\r\n    setStay() {\r\n        this.setIdle();\r\n    }\r\n    setBoomComplete() {\r\n        this.setStay();\r\n        console.log(\"rengshouliudan\");\r\n    }\r\n    setDeath() {\r\n        this.bodyLoader.url = \"ui://Game/death_\" + this.enemyType;\r\n        this.bodyLoader.content.setPlaySettings(1, -1, 1, 1, Laya.Handler.create(this, this.dispose));\r\n    }\r\n    dispose() {\r\n        Laya.timer.clearAll(this);\r\n        this.scene.removeSelf();\r\n        this.view.dispose();\r\n        Laya.Pool.recover(\"enenmy\", this);\r\n    }\r\n    get component() {\r\n        return this.enemy.component;\r\n    }\r\n    get bodyLoader() {\r\n        return this.enemy.component.getChildAt(0).asLoader;\r\n    }\r\n    getRandomFire() {\r\n        if (Math.random() > 0.5)\r\n            return 1;\r\n        return 2;\r\n    }\r\n    getFirePos() {\r\n        var p;\r\n        if (this.enemyType == PlayerData.ENEMY_PIS || this.enemyType == PlayerData.ENEMY_GRE) {\r\n            p = this.view.getChildAt(3).asTextField;\r\n        }\r\n        else if (this.enemyType == PlayerData.ENEMY_MAC) {\r\n            p = this.view.getChildAt(5).asTextField;\r\n        }\r\n        else if (this.enemyType == PlayerData.ENEMY_MOR) {\r\n            p = this.view.getChildAt(6).asTextField;\r\n        }\r\n        else if (this.enemyType == PlayerData.ENEMY_FIRE) {\r\n            p = this.view.getChildAt(7).asTextField;\r\n        }\r\n        else {\r\n            p = this.view.getChildAt(3).asTextField;\r\n        }\r\n        console.log(\"p---\", p.x, p.y);\r\n        return new Laya.Point(p.x, p.y);\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_Player.ts",
    "D:/littleGame/gunfire/src/View/PlayerAni.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_enemy.ts",
    "D:/littleGame/gunfire/src/Data/PlayerData.ts",
    "D:/littleGame/gunfire/src/View/EnemyBody.ts",
    "D:/littleGame/gunfire/src/View/EnemyBody.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts"
  ]
}
