{
  "code": "import { ViewManager } from \"../Manager/ViewManager\";\r\nimport { EventManager } from \"../Manager/EventManager\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { GameData } from \"../Data/GameData\";\r\nexport class PlayerSk {\r\n    constructor() {\r\n        this.isWuDi = false;\r\n        this.weaponType = 1;\r\n        this.loadComplete1 = false;\r\n        this.loadComplete2 = false;\r\n        this.loadComplete3 = false;\r\n        this.loadComplete4 = false;\r\n        this.aniName = \"\";\r\n        this.role = new Laya.Sprite();\r\n        this.role.x = 30;\r\n        this.templet1 = new Laya.Templet();\r\n        this.templet1.loadAni(\"res/zhujue_body.sk\");\r\n        this.templet1.on(Laya.Event.COMPLETE, this, this.parseComplete);\r\n        this.weapon1 = new Laya.Templet();\r\n        this.weapon1.loadAni(\"res/hero_arm.sk\");\r\n        this.weapon1.on(Laya.Event.COMPLETE, this, this.weaponComplete1);\r\n        this.weapon2 = new Laya.Templet();\r\n        this.weapon2.loadAni(\"res/hero_arm.sk\");\r\n        this.weapon2.on(Laya.Event.COMPLETE, this, this.weaponComplete2);\r\n        this.weapon3 = new Laya.Templet();\r\n        this.weapon3.loadAni(\"res/hero_arm.sk\");\r\n        this.weapon3.on(Laya.Event.COMPLETE, this, this.weaponComplete3);\r\n        this.wudiImg = fairygui.UIPackage.createObject(\"Game\", \"wudi\").asImage;\r\n    }\r\n    showWuDi() {\r\n        this.isWuDi = true;\r\n        this.role.addChild(this.wudiImg.displayObject);\r\n        this.wudiImg.x = (this.role.width - this.wudiImg.width) / 2;\r\n        this.wudiImg.y = -30;\r\n    }\r\n    hideWuDi() {\r\n        this.isWuDi = false;\r\n        this.role.removeChild(this.wudiImg.displayObject);\r\n    }\r\n    parseComplete() {\r\n        this.loadComplete1 = true;\r\n        this.body = this.templet1.buildArmature(0);\r\n        this.body.y = 110;\r\n        this.body.play(\"idle\", true);\r\n        this.sendLoadComplete();\r\n    }\r\n    weaponComplete1() {\r\n        this.loadComplete2 = true;\r\n        this.skin1 = this.weapon1.buildArmature(0);\r\n        this.skin1.x = -7;\r\n        this.skin1.y = 47;\r\n        this.skin1.showSkinByName(\"weapons2\");\r\n        this.sendLoadComplete();\r\n    }\r\n    weaponComplete2() {\r\n        this.loadComplete3 = true;\r\n        this.skin2 = this.weapon2.buildArmature(0);\r\n        this.skin2.x = -7;\r\n        this.skin2.y = 47;\r\n        this.skin2.showSkinByName(\"weapons3\");\r\n        this.sendLoadComplete();\r\n    }\r\n    weaponComplete3() {\r\n        this.loadComplete4 = true;\r\n        this.skin3 = this.weapon3.buildArmature(0);\r\n        this.skin3.x = -7;\r\n        this.skin3.y = 47;\r\n        this.skin3.showSkinByName(\"weapons4\");\r\n        this.sendLoadComplete();\r\n    }\r\n    setBodyIdle() {\r\n        this.body.play(\"idle\", true, false);\r\n    }\r\n    setArmIdle() {\r\n        this.arm.play(\"idle\", true, false);\r\n    }\r\n    setIdle() {\r\n        this.setUp();\r\n        this.setArmIdle();\r\n        this.setBodyIdle();\r\n    }\r\n    setRun() {\r\n        this.body.play(\"run\", true, false);\r\n        this.setUp();\r\n    }\r\n    setJump() {\r\n        this.body.play(\"jump\", true, false);\r\n        this.setUp();\r\n    }\r\n    setCrouch() {\r\n        this.body.play(\"crouch\", true, false);\r\n        this.setDown();\r\n    }\r\n    setAttack1() {\r\n        this.arm.play(\"attack3\", true, false);\r\n        this.aniName = \"attack3\";\r\n    }\r\n    setAttack2() {\r\n        this.arm.play(\"attack2\", true, false);\r\n        this.aniName = \"attack2\";\r\n    }\r\n    setFaceUp45() {\r\n        this.arm.rotation = -45;\r\n    }\r\n    setFaceUp90() {\r\n        this.arm.rotation = -90;\r\n    }\r\n    setWeapon(type) {\r\n        this.weaponType = type;\r\n        this.arm.stop();\r\n        this.role.removeChildren();\r\n        this.role.addChild(this.body);\r\n        this.role.addChild(this.arm);\r\n        if (this.isWuDi)\r\n            this.showWuDi();\r\n        if (ViewManager.instance.player.sFire) {\r\n            if (GameManager.instance.roleInfo.weaponType == GameData.WEAPON_RIFLE) {\r\n                this.setAttack2();\r\n            }\r\n            else {\r\n                this.setAttack1();\r\n            }\r\n        }\r\n        else {\r\n            this.setArmIdle();\r\n        }\r\n        ViewManager.instance.rolePlayer.roleSprite.addChild(this.role);\r\n    }\r\n    sendLoadComplete() {\r\n        if (this.loadComplete1 && this.loadComplete2 && this.loadComplete3 && this.loadComplete4) {\r\n            EventManager.instance.dispatcherEvt(GameEvent.ROLE_ANI_COMPLETE);\r\n        }\r\n    }\r\n    get arm() {\r\n        if (this.weaponType == 1) {\r\n            return this.skin1;\r\n        }\r\n        else if (this.weaponType == 2) {\r\n            return this.skin2;\r\n        }\r\n        else if (this.weaponType == 3) {\r\n            return this.skin3;\r\n        }\r\n        return this.skin1;\r\n    }\r\n    setDown() {\r\n        this.arm.rotation = 0;\r\n        this.skin1.y = this.skin2.y = this.skin3.y = 62;\r\n    }\r\n    setUp() {\r\n        this.arm.rotation = 0;\r\n        this.skin1.y = this.skin2.y = this.skin3.y = 47;\r\n    }\r\n    beHit() {\r\n    }\r\n    clearBeHit() {\r\n        this.role.x = 30;\r\n        Laya.Tween.clearTween(this.role);\r\n    }\r\n}\r\nPlayerSk.WEAPON_1 = \"weapons1\";\r\nPlayerSk.WEAPON_2 = \"weapons2\";\r\nPlayerSk.WEAPON_3 = \"weapons3\";\r\nPlayerSk.WEAPON_4 = \"weapons4\";\r\nPlayerSk.IDLE = \"idle\";\r\nPlayerSk.RUN = \"run\";\r\nPlayerSk.JUMP = \"jump\";\r\nPlayerSk.CROUCH = \"crouch\";\r\nPlayerSk.ATTACK_1 = \"attack1\";\r\nPlayerSk.ATTACK_2 = \"attack2\";\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts"
  ]
}
