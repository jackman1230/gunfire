{
  "code": "import { GameManager } from \"./GameManager\";\r\nimport { ViewManager } from \"./ViewManager\";\r\nimport { MooSnowSDK } from \"./MooSnowSDK\";\r\nexport class AssetsManager {\r\n    constructor() {\r\n    }\r\n    static get instance() {\r\n        if (this._instance == null)\r\n            this._instance = new AssetsManager();\r\n        return this._instance;\r\n    }\r\n    loadLoadingAssetsData() {\r\n        AssetsManager.loadingAssetsData.push({ url: \"loading/loading_atlas0.png\", type: Laya.Loader.IMAGE }, { url: \"loading/loading_atlas_n8quey.jpg\", type: Laya.Loader.IMAGE }, { url: \"loading/loading.proto\", type: Laya.Loader.BUFFER });\r\n        if (Laya.Browser.onPC) {\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.loadingAssetsComplete));\r\n            return;\r\n        }\r\n        if (moosnow.getAppPlatform() == moosnow.APP_PLATFORM.WX) {\r\n            console.log(\"onWeiXin\");\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.onWXLoaded));\r\n        }\r\n        else if (moosnow.getAppPlatform() == moosnow.APP_PLATFORM.QQ) {\r\n            console.log(\"loadQQ\");\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.onQQLoaded));\r\n        }\r\n        else if (moosnow.getAppPlatform() == moosnow.APP_PLATFORM.VIVO) {\r\n            console.log(\"loadVIVO \");\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.onVIVOLoaded));\r\n        }\r\n        else {\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.loadingAssetsComplete));\r\n        }\r\n    }\r\n    onWXLoaded() {\r\n        if (moosnow.getAppPlatform() == moosnow.APP_PLATFORM.QQ) {\r\n            console.log(\"loadQQ\");\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.onQQLoaded));\r\n            return;\r\n        }\r\n        let wxLoad = Laya.Browser.window.wx;\r\n        const wxloadTask = wxLoad[\"loadSubpackage\"]({\r\n            name: 'res',\r\n            success: function (res) {\r\n                AssetsManager.instance.loadingAssetsComplete();\r\n            },\r\n            fail: function (res) {\r\n                console.log(\"分包加载wx失败\");\r\n            }\r\n        });\r\n    }\r\n    onQQLoaded() {\r\n        let qqLoad = Laya.Browser.window.qq;\r\n        const qqloadTask = qqLoad[\"loadSubpackage\"]({\r\n            name: 'res',\r\n            success: function (res) {\r\n                AssetsManager.instance.loadingAssetsComplete();\r\n            },\r\n            fail: function (res) {\r\n                console.log(\"分包加载qq失败\");\r\n            }\r\n        });\r\n    }\r\n    onVIVOLoaded() {\r\n        let qgLoad = Laya.Browser.window.qg;\r\n        const qgloadTask = qgLoad[\"loadSubpackage\"]({\r\n            name: 'res',\r\n            success: function (res) {\r\n                AssetsManager.instance.loadingAssetsComplete();\r\n            },\r\n            fail: function (res) {\r\n                console.log(\"分包加载vivo失败\");\r\n            }\r\n        });\r\n    }\r\n    loadingAssetsComplete() {\r\n        fairygui.UIPackage.addPackage(\"loading/loading\");\r\n        console.log(\"loading界面资源加载完成--显示loading界面，并开始加载游戏资源\");\r\n        MooSnowSDK.getMistouchPosNum();\r\n        MooSnowSDK.getMisTouchNum();\r\n        MooSnowSDK.getAllConfig();\r\n        ViewManager.instance.createLoaningView();\r\n        this.loadAssetsData();\r\n    }\r\n    loadAssetsData() {\r\n        AssetsManager.assetsData.push({ url: \"res/Game_atlas0.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_1.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_2.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_3.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_4.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_5.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_6.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_7.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_8.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_9.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_10.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas_n8qun1.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas_n8qun7.png\", type: Laya.Loader.IMAGE }, { url: \"res/LevelData.json\", type: Laya.Loader.JSON }, { url: \"res/LevelData2.json\", type: Laya.Loader.JSON }, { url: \"res/map_1.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_3.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_4.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_5.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_6.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_7.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_8.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_1_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_2_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_3_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_4_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_5_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_6_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_7_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_8_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/Game.proto\", type: Laya.Loader.BUFFER }, { url: \"res/zhujue_body.png\", type: Laya.Loader.IMAGE }, { url: \"res/zhujue_body.sk\", type: Laya.Loader.BUFFER }, { url: \"res/hero_arm.png\", type: Laya.Loader.IMAGE }, { url: \"res/hero_arm.sk\", type: Laya.Loader.BUFFER }, { url: \"res/sound/bgm.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/BombDrop.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/boom.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/btn_click.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/btn_press.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/die_1.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/die_2.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/die_3.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/die_4.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/enemy_fire.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/gameOver.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/get_goods.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/obstacleBoom.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/obstacleBoom2.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/tank_fire.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/weapon_1.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/weapon_2.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/weapon_3.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/weapon_10.mp3\", type: Laya.Loader.SOUND }, { url: \"res/sound/chapterBgm.mp3\", type: Laya.Loader.SOUND });\r\n        Laya.loader.create(AssetsManager.assetsData, Laya.Handler.create(this, this.loadComplete), Laya.Handler.create(this, this.onloadingProgress));\r\n    }\r\n    onloadingProgress(progress) {\r\n        ViewManager.instance.setLoadongProgress(progress);\r\n    }\r\n    loadComplete() {\r\n        fairygui.UIPackage.addPackage(\"res/Game\");\r\n        ViewManager.instance.hideLoadingView();\r\n        moosnow.http.finishLoading();\r\n        GameManager.instance.startGame();\r\n    }\r\n    setVersionUrl(arr) {\r\n        for (let i = 0; i < arr.length; i++) {\r\n            var t = arr[i];\r\n            t.url = this.getVersionUrl(t.url);\r\n        }\r\n    }\r\n    getVersionUrl(s) {\r\n        var v = Laya.loader.getRes(\"version.json\");\r\n        if (v[s]) {\r\n            return v[s];\r\n        }\r\n        return s;\r\n    }\r\n}\r\nAssetsManager.assetsData = [];\r\nAssetsManager.loadingAssetsData = [];\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Manager/MooSnowSDK.ts"
  ]
}
