{
  "code": "import { ViewManager } from \"../Manager/ViewManager\";\r\nimport EnemyBody from \"./Body/EnemyBody\";\r\nimport Enemy from \"./Enemy\";\r\nimport { BombData } from \"../Data/GameData\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nexport default class Chopper extends Enemy {\r\n    constructor() {\r\n        super();\r\n        this.stillFire = 0;\r\n        this.randomY = false;\r\n    }\r\n    createView(d) {\r\n        super.initData(d);\r\n        Laya.Scene.load(\"ChopperBody.scene\", Laya.Handler.create(this, this.loadComplete));\r\n    }\r\n    ;\r\n    initView() {\r\n        super.initView();\r\n        var b = this.scene.getComponent(EnemyBody);\r\n        b.activeDis = 800;\r\n    }\r\n    activeEnemy(s) {\r\n        if (this.isActive)\r\n            return;\r\n        if (this.isDeath)\r\n            return;\r\n        if (this.box.owner == s) {\r\n            this.isActive = true;\r\n            this.setRun();\r\n            this.setStillFire();\r\n            Laya.timer.loop(4000, this, this.setStillFire);\r\n            Laya.timer.loop(4000, this, this.setRun);\r\n        }\r\n    }\r\n    setRun() {\r\n        var roleX = ViewManager.instance.rolePlayer.roleSprite.x;\r\n        if (this.scene.x > roleX) {\r\n            Laya.Tween.to(this.scene, { x: roleX - this.getDis(), y: this.scene.y + this.getRandomY() }, 2000);\r\n        }\r\n        else {\r\n            Laya.Tween.to(this.scene, { x: roleX + this.getDis(), y: this.scene.y + this.getRandomY() }, 2000);\r\n        }\r\n    }\r\n    setStillFire() {\r\n        this.setFire();\r\n        Laya.timer.loop(300, this, this.setFire);\r\n    }\r\n    setFire() {\r\n        this.stillFire++;\r\n        var p = new Laya.Point(this.view.width / 2, this.view.height);\r\n        ViewManager.instance.createChopperBomb(BombData.BOMB_CHOPPER, ViewManager.instance.getBodyCenterPos(this.scene), p);\r\n        SoundManager.instance.playSound(\"bombDrop\");\r\n        if (this.stillFire >= 5) {\r\n            this.stillFire = 0;\r\n            Laya.timer.clear(this, this.setFire);\r\n        }\r\n    }\r\n    setDeath() {\r\n        if (this.isDeath)\r\n            return;\r\n        this.isDeath = true;\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this.scene);\r\n        this.enemy.url = \"ui://Game/boom_5\";\r\n        this.enemy.content.setPlaySettings(0, -1, 1, 0, Laya.Handler.create(this, this.dispose));\r\n        if (this.isBoss) {\r\n            GameManager.instance.bossDeath = true;\r\n        }\r\n        SoundManager.instance.playSound(\"boom\");\r\n    }\r\n    clearWarView() {\r\n        this.dispose();\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        Laya.timer.clearAll(this);\r\n    }\r\n    recover() {\r\n        Laya.Pool.recover(\"chopper\", this);\r\n    }\r\n    getDis() {\r\n        return (Math.random() * 200 + 100);\r\n    }\r\n    getRandomY() {\r\n        this.randomY = !this.randomY;\r\n        var r = Math.random();\r\n        if (this.randomY) {\r\n            return (r * 20 + 30);\r\n        }\r\n        else {\r\n            return (r * -20 - 30);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_Player.ts",
    "D:/littleGame/gunfire/src/View/PlayerAni.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_enemy.ts",
    "D:/littleGame/gunfire/src/View/Body/EnemyBody.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/View/Enemy.ts",
    "D:/littleGame/gunfire/src/Data/PlayerData.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts",
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/SoundManager.ts"
  ]
}
