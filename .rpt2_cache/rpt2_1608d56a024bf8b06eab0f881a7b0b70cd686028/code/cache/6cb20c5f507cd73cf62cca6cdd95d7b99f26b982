{
  "code": "import WXFUI_BeforeWar from \"../fui/Game/WXFUI_BeforeWar\";\r\nimport PopUpView from \"./PopUpView\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { ViewManager } from \"../Manager/ViewManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { EventManager } from \"../Manager/EventManager\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nexport default class BeforeWar extends PopUpView {\r\n    constructor() { super(); }\r\n    createView() {\r\n        this.view = WXFUI_BeforeWar.createInstance();\r\n        this.view.m_enter.onClick(this, this.enterGame);\r\n        this.shopData = GameManager.instance.levelData.shop;\r\n        this.view.m_item_1.visible = this.view.m_item_2.visible = this.view.m_item_3.visible = this.view.m_item_4.visible = false;\r\n        var index = 0;\r\n        for (const key in this.shopData) {\r\n            if (this.shopData.hasOwnProperty(key)) {\r\n                index++;\r\n                var d = this.shopData[key];\r\n                this.view[\"m_item_\" + index].visible = true;\r\n                this.view[\"m_item_\" + index].m_coin.text = d.coin + \"\";\r\n                this.view[\"m_item_\" + index].m_info.text = d.name;\r\n                this.view[\"m_item_\" + index].m_icon.url = \"ui://Game/goods_\" + d.type;\r\n                this.view[\"m_item_\" + index].m_buy.onClick(this, this.buyItem, [d]);\r\n                this.view[\"m_item_\" + index].m_free.onClick(this, this.buyItemByFree, [d]);\r\n            }\r\n        }\r\n    }\r\n    buyItem(d) {\r\n        SoundManager.instance.playSound(\"btn_press\");\r\n        if (GameManager.instance.roleInfo.totalCoin < d.coin) {\r\n            ViewManager.instance.showTipsView(\"金币不足！\");\r\n            return;\r\n        }\r\n        else {\r\n            ViewManager.instance.showTipsView(\"金币-\" + d.coin);\r\n            GameManager.instance.roleInfo.totalCoin -= d.coin;\r\n            GameManager.instance.buyShopItem(d);\r\n        }\r\n    }\r\n    buyItemByFree(d) {\r\n        SoundManager.instance.playSound(\"btn_press\");\r\n        ViewManager.instance.showTipsView(\"敬请期待！@_@\");\r\n        EventManager.instance.dispatcherEvt(GameEvent.BUY_SHOP_ITEM_FREE, d);\r\n    }\r\n    enterGame() {\r\n        SoundManager.instance.playSound(\"btn_click\");\r\n        GameManager.instance.enterGame();\r\n        ViewManager.instance.hidePopUpView(this, true);\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_BeforeWar.ts",
    "D:/littleGame/gunfire/src/View/PopUpView.ts",
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Manager/SoundManager.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts"
  ]
}
