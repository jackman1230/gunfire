{
  "code": "import { ViewManager } from \"../Manager/ViewManager\";\r\nimport Enemy from \"./Enemy\";\r\nimport { GameManager } from \"../Manager/GameManager\";\r\nimport { SoundManager } from \"../Manager/SoundManager\";\r\nimport { GameData } from \"../Data/GameData\";\r\nimport EnemyBody from \"./Body/EnemyBody\";\r\nexport default class Tank extends Enemy {\r\n    constructor() {\r\n        super();\r\n        this.randomX = false;\r\n    }\r\n    createView(d) {\r\n        super.initData(d);\r\n        Laya.Scene.load(\"TankBody\" + this.enemyType + \".scene\", Laya.Handler.create(this, this.loadComplete));\r\n    }\r\n    ;\r\n    activeEnemy(s) {\r\n        if (this.isActive)\r\n            return;\r\n        if (this.isDeath)\r\n            return;\r\n        if (this.box.owner == s) {\r\n            this.isActive = true;\r\n            this.doActive();\r\n            Laya.timer.loop(2000, this, this.doActive);\r\n        }\r\n    }\r\n    doActive() {\r\n        this.setFire();\r\n        this.setRun();\r\n    }\r\n    initView() {\r\n        super.initView();\r\n        var b = this.scene.getComponent(EnemyBody);\r\n        b.activeDis = 800;\r\n    }\r\n    setRun() {\r\n        var roleDir = ViewManager.instance.rolePlayer.direction;\r\n        var roleX = ViewManager.instance.rolePlayer.roleSprite.x;\r\n        if (roleX > this.scene.x) {\r\n            this.direction = 1;\r\n            this.setDirection();\r\n        }\r\n        else {\r\n            this.direction = -1;\r\n            this.setDirection();\r\n        }\r\n        Laya.Tween.to(this.scene, { x: this.scene.x + this.getRandomX() }, 2000);\r\n    }\r\n    beHit(s) {\r\n        if (this.isDeath)\r\n            return;\r\n        if (s.o == this.box.owner) {\r\n            this.blood -= s.d;\r\n            Laya.timer.clear(this, this.setColor);\r\n            if (this.blood <= 0) {\r\n                this.setDeath();\r\n            }\r\n            else {\r\n                this.bodyLoader.component.getChildAt(0).asLoader.content.color = \"#ff0000\";\r\n                Laya.timer.once(200, this, this.setColor);\r\n            }\r\n        }\r\n    }\r\n    setColor() {\r\n        this.bodyLoader.component.getChildAt(0).asLoader.content.color = \"#ffffff\";\r\n    }\r\n    setFire() {\r\n        this.bodyLoader.url = \"ui://Game/enemy_fire_\" + this.enemyType;\r\n        if (this.enemyType == GameData.ENEMY_TANK_1 || this.enemyType == GameData.ENEMY_TANK_2) {\r\n            this.bodyLoader.component.getChildAt(0).asLoader.content.setPlaySettings(0, -1, 1, 0, Laya.Handler.create(this, this.tankShotComplete));\r\n        }\r\n        SoundManager.instance.playSound(\"tank_fire\");\r\n        ViewManager.instance.createEnemyBullet(this.enemyType, this.direction, ViewManager.instance.getBodyCenterPos(this.scene));\r\n    }\r\n    tankShotComplete() {\r\n        this.setIdle();\r\n    }\r\n    setDeath() {\r\n        if (this.isDeath)\r\n            return;\r\n        this.isDeath = true;\r\n        Laya.timer.clearAll(this);\r\n        Laya.Tween.clearAll(this.scene);\r\n        this.bodyLoader.url = \"\";\r\n        var ani = fairygui.UIPackage.createObject(\"Game\", \"boom_5\").asMovieClip;\r\n        ani.setPlaySettings(0, -1, 1, 0, Laya.Handler.create(this, this.dispose));\r\n        ani.x = 20;\r\n        ani.y = -100;\r\n        this.bodyLoader.displayObject.addChild(ani.displayObject);\r\n        if (this.isBoss) {\r\n            GameManager.instance.bossDeath = true;\r\n        }\r\n        SoundManager.instance.playSound(\"boom\");\r\n    }\r\n    getDeathBoomPos() {\r\n    }\r\n    recover() {\r\n        Laya.Pool.recover(\"tank\", this);\r\n    }\r\n    getRandomX() {\r\n        this.randomX = !this.randomX;\r\n        var r = Math.random();\r\n        if (this.randomX) {\r\n            return (r * 20 + 50);\r\n        }\r\n        else {\r\n            return (r * -20 - 50);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/View/Enemy.ts",
    "D:/littleGame/gunfire/src/Data/PlayerData.ts",
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/SoundManager.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts",
    "D:/littleGame/gunfire/src/View/Body/EnemyBody.ts"
  ]
}
