{
  "code": "import { GameManager } from \"./GameManager\";\r\nimport { ViewManager } from \"./ViewManager\";\r\nexport class AssetsManager {\r\n    constructor() {\r\n    }\r\n    static get instance() {\r\n        if (this._instance == null)\r\n            this._instance = new AssetsManager();\r\n        return this._instance;\r\n    }\r\n    loadLoadingAssetsData() {\r\n        AssetsManager.loadingAssetsData.push({ url: \"res/loading/loading_atlas0.png\", type: Laya.Loader.IMAGE }, { url: \"res/loading/loading_atlas_n8quey.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/loading/loading.proto\", type: Laya.Loader.BUFFER });\r\n        if (Laya.Browser.onPC) {\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.loadingAssetsComplete));\r\n        }\r\n        else {\r\n            Laya.loader.create(AssetsManager.loadingAssetsData, Laya.Handler.create(this, this.onLoaded));\r\n        }\r\n    }\r\n    onLoaded() {\r\n        const loadTask = wx[\"loadSubpackage\"]({\r\n            name: 'wxgame_pack',\r\n            success: function (res) {\r\n                AssetsManager.instance.loadingAssetsComplete();\r\n            },\r\n            fail: function (res) {\r\n            }\r\n        });\r\n        loadTask.onProgressUpdate(res => {\r\n            console.log('下载进度', res.progress);\r\n            console.log('已经下载的数据长度', res.totalBytesWritten);\r\n            console.log('预期需要下载的数据总长度', res.totalBytesExpectedToWrite);\r\n        });\r\n    }\r\n    loadingAssetsComplete() {\r\n        fairygui.UIPackage.addPackage(\"res/loading/loading\");\r\n        console.log(\"loading界面资源加载完成--显示loading界面，并开始加载游戏资源\");\r\n        ViewManager.instance.createLoaningView();\r\n        this.loadAssetsData();\r\n    }\r\n    loadAssetsData() {\r\n        AssetsManager.assetsData.push({ url: \"res/Game_atlas0.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_1.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_2.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_3.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_4.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_5.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_6.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas0_7.png\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas_n8qun1.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/Game_atlas_n8qun7.png\", type: Laya.Loader.IMAGE }, { url: \"res/LevelData.json\", type: Laya.Loader.JSON }, { url: \"res/map_1.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_2.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_3.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_4.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_5.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_6.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_7.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/map_8.jpg\", type: Laya.Loader.IMAGE }, { url: \"res/Game.proto\", type: Laya.Loader.BUFFER });\r\n        console.log(AssetsManager.assetsData);\r\n        Laya.loader.create(AssetsManager.assetsData, Laya.Handler.create(this, this.loadComplete), Laya.Handler.create(this, this.onloadingProgress));\r\n    }\r\n    onloadingProgress(progress) {\r\n        ViewManager.instance.setLoadongProgress(progress);\r\n    }\r\n    loadComplete() {\r\n        fairygui.UIPackage.addPackage(\"res/Game\");\r\n        console.log(\"资源加载完成\");\r\n        ViewManager.instance.hideLoadingView();\r\n        GameManager.instance.startGame();\r\n    }\r\n}\r\nAssetsManager.assetsData = [];\r\nAssetsManager.loadingAssetsData = [];\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/fui/Game/GameBinder.ts"
  ]
}
