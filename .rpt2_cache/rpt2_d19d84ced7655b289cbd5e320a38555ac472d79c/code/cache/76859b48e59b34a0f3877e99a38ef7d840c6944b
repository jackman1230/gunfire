{
  "code": "import { EventManager } from \"../../Manager/EventManager\";\r\nimport GameEvent from \"../../Control/GameEvent\";\r\nimport { GameManager } from \"../../Manager/GameManager\";\r\nimport { ViewManager } from \"../../Manager/ViewManager\";\r\nexport default class BulletBody extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.bulletType = 0;\r\n        this.disposeLeft = 0;\r\n        this.disposeRight = 0;\r\n        this.isRemove = false;\r\n    }\r\n    onAwake() {\r\n        this.selfCollider = this.owner.getComponent(Laya.BoxCollider);\r\n        this.selfBody = this.selfCollider.rigidBody;\r\n        this.self = this.owner;\r\n        this.oriPosX = this.self.x;\r\n        this.isRemove = false;\r\n        var moveX = Math.abs(ViewManager.instance.warView.warView.x);\r\n        this.disposeRight = Laya.stage.width + moveX - 30;\r\n        this.disposeLeft = moveX - 20;\r\n        if (this.selfCollider.label.indexOf(\"PlayerBullet\") > -1) {\r\n            this.bulletType = Number(this.selfCollider.label.substr((\"PlayerBullet\").length, 1));\r\n            this.damage = GameManager.instance.getPlayerBulletDamage(this.bulletType);\r\n            if (ViewManager.instance.rolePlayer.sRun) {\r\n                this.disposeRight += 220;\r\n                this.disposeLeft -= 150;\r\n            }\r\n        }\r\n    }\r\n    onDisable() {\r\n    }\r\n    onTriggerEnter(other, self, contact) {\r\n        if (this.isRemove)\r\n            return;\r\n        if (self.label.indexOf(\"PlayerBullet\") > -1) {\r\n            if (other.label == \"enemy\") {\r\n                EventManager.instance.dispatcherEvt(GameEvent.PLAYER_BULLET_HIT_ENEMY, { o: other.owner, s: self.owner, d: this.damage });\r\n            }\r\n            else if (other.label == \"obstacle\") {\r\n                EventManager.instance.dispatcherEvt(GameEvent.PLAYER_BULLET_HIT_OBSTACLE, { o: other.owner, s: self.owner, d: this.damage });\r\n            }\r\n            return;\r\n        }\r\n        if (self.label == \"enemyBullet\") {\r\n            if (other.label == \"player\") {\r\n                this.selfCollider.destroy();\r\n                EventManager.instance.dispatcherEvt(GameEvent.ENEMY_BULLET_HIT_PLAYER, { o: other.owner, s: self.owner });\r\n            }\r\n            return;\r\n        }\r\n    }\r\n    onTriggerExit() {\r\n    }\r\n    onTriggerStay(other, self, contact) {\r\n    }\r\n    onUpdate() {\r\n        if (this.isRemove)\r\n            return;\r\n        if (this.self.x > this.disposeRight || this.self.x < this.disposeLeft || this.self.y < -50 || this.self.y > Laya.stage.height + 50) {\r\n            this.owner.removeSelf();\r\n            this.isRemove = true;\r\n            EventManager.instance.dispatcherEvt(GameEvent.BULLET_DISPOSE, this.owner);\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/GameManager.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts"
  ]
}
