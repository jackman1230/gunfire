{
  "code": "import { EventManager } from \"../Manager/EventManager\";\r\nimport GameEvent from \"../Control/GameEvent\";\r\nimport { ViewManager } from \"../Manager/ViewManager\";\r\nimport { ui } from \"../ui/layaMaxUI\";\r\nimport HostageBody from \"./Body/HostageBody\";\r\nimport { GoodsType } from \"../Data/GameData\";\r\nexport default class HostageView {\r\n    constructor() {\r\n        this.isActive = false;\r\n    }\r\n    createView(d) {\r\n        this.scene = new ui.HostageBodyUI();\r\n        this.pos = d.pos;\r\n        this.isActive = false;\r\n        this.loadComplete();\r\n    }\r\n    loadComplete() {\r\n        this.body = this.scene.getComponent(Laya.RigidBody);\r\n        this.box = this.scene.getComponent(Laya.BoxCollider);\r\n        this.scene.addComponent(HostageBody);\r\n        this.script = this.scene.getComponent(HostageBody);\r\n        this.scene.x = this.pos.x;\r\n        this.scene.y = this.pos.y;\r\n        this.view = fairygui.UIPackage.createObject(\"Game\", \"hostage\");\r\n        this.scene.addChild(this.view.displayObject);\r\n        ViewManager.instance.warView.scene.addChild(this.scene);\r\n        EventManager.instance.addNotice(GameEvent.ACTIVE_HOSTAGE, this, this.activeHostage);\r\n    }\r\n    activeHostage(s) {\r\n        if (this.isActive)\r\n            return;\r\n        if (this.box.owner == s) {\r\n            this.isActive = true;\r\n            this.view.m_en.url = \"ui://Game/hostageAni\";\r\n            this.view.m_en.content.setPlaySettings(0, -1, 1, 0, Laya.Handler.create(this, this.dispose));\r\n        }\r\n    }\r\n    dispose(s) {\r\n        var p = new Laya.Point();\r\n        p.x = this.scene.x + this.scene.width / 2;\r\n        p.y = this.scene.y + this.scene.height / 2;\r\n        ViewManager.instance.createGoods(GoodsType.GoodsType_BOX, p);\r\n        EventManager.instance.offNotice(GameEvent.ACTIVE_HOSTAGE, this, this.activeHostage);\r\n        this.view.removeChildren();\r\n        if (this.view)\r\n            this.view.dispose();\r\n        if (this.scene) {\r\n            this.scene.removeSelf();\r\n        }\r\n        Laya.Pool.recover(\"hostage\", this);\r\n    }\r\n}\r\n",
  "references": [
    "D:/littleGame/gunfire/src/Manager/EventManager.ts",
    "D:/littleGame/gunfire/src/Control/GameEvent.ts",
    "D:/littleGame/gunfire/src/Manager/ViewManager.ts",
    "D:/littleGame/gunfire/src/ui/layaMaxUI.ts",
    "D:/littleGame/gunfire/src/fui/Game/WXFUI_hostage.ts",
    "D:/littleGame/gunfire/src/View/Body/HostageBody.ts",
    "D:/littleGame/gunfire/src/Data/PlayerData.ts",
    "D:/littleGame/gunfire/src/Data/GameData.ts"
  ]
}
